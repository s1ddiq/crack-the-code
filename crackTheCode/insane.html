<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RODE</title>
</head>

<link rel="stylesheet" href="insane.css">
<body>
    <!-- <audio loop controls> -->
        <!-- <source src="code.wav" type="audio/wav"> -->
    <!-- </audio> -->

    <img src="duck-encoded.png" alt="" class="hidden" id="duck">

    <div id="insaneContainer" class="shown">

        <img src="scroll_top.png" alt="">
        <div id="insaneInner">

            <p id="poem">
                <i style="font-size: 0.3em;">HINT: I hide in plain sight...</i><br>
                Yonder lies the fading gleam, <br>
                Over hills of dreams unseen, <br>
                Underneath the starlit beam, <br>
                
                Riddles dance in twilight's seam, <br>
                Echoes whisper through the trees, <br>
                <br>
                Never seeking, always keen, <br>
                Oracles of forgotten seas. <br>
                Through the mist where shadows dart, <br>
                <br>
                Somewhere lost, the truth departs, <br> 
                Mysteries in twilight's art, <br>
                Across the veils of darkened charts. <br>
                Realms of wonder, minds unbent, <br> 
                Trails of knowledge poorly spent.</p>
        </div>
        <img src="scroll_bottom.png" alt="">
    </div>

    <h1 id="detectMessage">type the message anywhere <sm>no spaces</sm></h1>

    <img src="vector.png" alt="" id="vector">

    <div style="width: 100vw; height: 100vh;" id="inputScreenHolder" class="hidden">

        <div id="inputScreen" class="shown">
            <label for="inputCode" id="inputCodeLabel">
                <br><br><br>
                R3JlZXRpbmdzLCB3YW5kZXJlciwgYW5kIGt1ZG9zIGZvciBqb3VybmV5aW5nIHRoaXMgZmFyLi4uIGJ1dCBiZSBwcmVwYXJlZCwgZm9yIHRoZSBwYXRoIGFoZWFkIHdpbGwgZ3JvdyBpbnRlbnNlLiBBbiBpbWFnZSBhd2FpdHMgeW91LCBhbmQgd2l0aGluIGl0IGxpZXMgYSBzZWNyZXQgY29kZSBmb3IgeW91IHRvIHVuY292ZXIuIE5vdyBnbyBpbnRvIGNvbnNvbGUu
                <!-- <input type="text" name="inputCode" id="inputCode"> -->
            </label>
        </div>
    </div>

    <audio src="audio/wrong.mp3" id="wrongEL"></audio>
    <audio src="audio/correct.mp3" id="correctEL"></audio>

    <script>
   const bodyEL = document.querySelector('body');
const keyPressed = [];
const secretPhrase = 'yourenotsmart';
const validKeys = secretPhrase.split('');
const messageEL = document.getElementById('detectMessage');
const wrongEL = document.getElementById('wrongEL');
const correctEL = document.getElementById('correctEL');
const insaneContainer = document.getElementById('insaneContainer');
const inputScreenHolder = document.getElementById('inputScreenHolder');
const insaneInner = document.getElementById('insaneInner');

// Define the callback function
function handleKeydown(e) {
    const key = e.key.toLowerCase();
    console.log(keyPressed);

    if (validKeys.includes(key)) {
        keyPressed.push(key);

        if (keyPressed.length > secretPhrase.length) {
            keyPressed.shift();
        }

        if (keyPressed.join('') === secretPhrase) {
            messageEL.style.color = 'green';
            correctEL.play();
            keyPressed.length = 0;
            setTimeout(() => {
                showInputScreen();
                inputScreenHolder.focus();
            }, 2000);

            console.clear();
            console.log('100 111 32 45 45 62 32 98 101 103 105 110 73 109 97 103 101 40 41 ');
        
            console.log(`

https://codebeautify.org/ascii-to-text
___________________________________`);
        }

        if (keyPressed.length === secretPhrase.length && keyPressed !== secretPhrase) {
            wrongEL.play();
            messageEL.style.color = 'red';
        }
    }
}

function showInputScreen() {
    insaneContainer.classList.add('hidden');
    insaneContainer.classList.remove('shown');
    inputScreenHolder.classList.add('shown');
    inputScreenHolder.classList.remove('hidden');
    insaneInner.classList.add('hidden');
    messageEL.classList.add('hidden');
    // Remove the event listener
    bodyEL.removeEventListener('keydown', handleKeydown);
}

// Add the event listener
bodyEL.addEventListener('keydown', handleKeydown);





const duck = document.getElementById('duck');
const vector = document.getElementById('vector');

function beginImage() {
    duck.classList.add('shown');
    vector.classList.add('hidden');
    alert('right click the duck > save image as > go to https://www.pelock.com/products/steganography-online-codec > decode password is: cRackthecODE')
}

function beginLevelTwo() {
    alert('in your browser URL replace: insane.html with level2.html');
    duck.classList.add('hidden');
}

    </script>
</body>
</html>
